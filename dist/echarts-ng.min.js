!function(e){"use strict";e.module("echarts-ng",[])}(angular),function(e){"use strict";function t(){var t=this;t.$get=[function(){function t(e,t){if(t){var r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a1}: <br/> {b1}: {c1}"}};e.setOption(r)}}function r(e){return e.reduce(function(e,t){return e+t},0)}function a(e){var t;return t=e.reduce(function(e,t,a,n){if(a>0&&a<n.length-1){var i=a,o=n.slice(0,i),s=r(o);e.push(s)}return e},[]),t.unshift(0)&&t.push(0),t}function n(t,r){if(r&&e.isArray(t.series)&&1===t.series.length){var a=t.series[0];if(e.isArray(a.data)){var n={stack:"waterfall",label:{normal:{show:!0,position:"inside"}}};e.extend(a,n);var o={name:"helper",type:"bar",stack:"waterfall",itemStyle:{normal:{barBorderColor:"rgba(0,0,0,1)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}},data:i.calculateWaterfallFlow(a.data)};t.series=[o,a]}}}var i={};return i.adaptWaterfallTooltip=t,i.calculateWaterfallFlow=a,i.adaptWaterfallSeries=n,i}]}e.module("echarts-ng").provider("$waterfall",t)}(angular),function(e){"use strict";function t(){var t=this;t.initialCalculateHeight="",t.calculateDynamicDimension=function(e){var t=45,r=e.length,a=e[0].data.length*r;switch(!0){case 5>a:t=60;break;case a>=5&&10>a:t=45;break;case a>=10:t=35}return t*a+"px"},t.$get=[function(){function r(r,a){if(!e.isString(a))return void console.warn("The Pass Pixel Ratio Not Assign, Please Make Sure Height Already Specified");var n,i,o=a.split(":").reverse().map(Number);return 2!==o.length?void console.warn("The Pass Pixel Ratio Invalid, Please Verify Param"):(n=r.clientWidth,i=n*o[0]/o[1],t.initialCalculateHeight=i+"px",void(r.style.height=i+"px"))}function a(e){e.style.removeProperty?e.style.removeProperty("height"):e.style.removeAttribute("height")}function n(e){e.resize()}function i(r,a,n){e.isArray(a)&&e.isObject(a[0])&&e.isArray(a[0].data)&&(r.style.height=n?t.calculateDynamicDimension(a):t.initialCalculateHeight)}var o={};return o.adaptEchartsDimension=r,o.removeEchartsDimension=a,o.synchronizeEchartsDimension=n,o.adjustEchartsDimension=i,o}]}e.module("echarts-ng").provider("$dimension",t)}(angular),function(e){"use strict";function t(){this.storage={}}function r(){var r=this;r.GLOBAL_OPTION={theme:"macarons",driftPalette:!0,title:{left:"center",top:"top",padding:[20,10,10,10]},grid:{top:"15%",left:"5%",right:"5%",bottom:"5%",containLabel:!0},backgroundColor:"rgba(255, 255, 255, .5)",legend:{left:"center",top:"top",padding:[20,10,10,10]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}}},r.setGlobalOption=function(t){e.extend(r.GLOBAL_OPTION,t)},r.$get=["$q","$timeout","$waterfall","$dimension",function(a,n,i,o){function s(){return r.GLOBAL_OPTION}function c(){return Math.random().toString(36).substr(2,9)}function l(e,t){p.storage.set(e,t)}function u(e){var t=a.defer();return n(function(){p.storage.has(e)?t.resolve(p.storage.get(e)):(console.error("Echarts Identity Not Registered, Please Verify The Process"),t.reject({errorDesc:"Echarts Identity Not Registered, Please Verify The Process"}))},0),t.promise}function h(e){p.storage.has(e)&&p.storage["delete"](e)}function f(t,r){var a=p.storage.get(t);return e.isUndefined(a)?void console.warn("The instance not registered. Probably the exception belongs to the directive wrap"):(i.adaptWaterfallSeries(r,r.waterfall),o.adjustEchartsDimension(a.getDom(),r.series,r.dynamic),void(e.isObject(r)&&e.isArray(r.series)&&r.series.length?(a.hideLoading(),a.resize(),a.setOption(r)):(a.clear(),a.showLoading())))}function g(t,r){if(r){var a=t.getOption(),i=e.copy(a.color),o=d(i,p.storage.size);n(function(){t.setOption({color:o})},0)}}function d(e,t){var r,a,n=e.length;return r=n>t?t:t%n,a=e.splice(0,r),e.concat(a)}var p={};return p.storage=e.isDefined(Map)?new Map:new t,p.generateInstanceIdentity=c,p.getEchartsGlobalOption=s,p.registerEchartsInstance=l,p.queryEchartsInstance=u,p.removeEchartsInstance=h,p.updateEchartsInstance=f,p.driftPaletteProperty=d,p.driftEchartsPalette=g,p}]}e.module("echarts-ng").provider("$echarts",r),t.prototype.has=function(e){return this.storage.hasOwnProperty(e)},t.prototype.get=function(e){return this.storage[e]},t.prototype.set=function(e,t){this.storage[e]=t},t.prototype["delete"]=function(e){delete this.storage[e]},Object.defineProperty(t.prototype,"size",{enumerable:!0,configurable:!1,get:function(){return Object.keys(this.storage).length}})}(angular),function(e,t){"use strict";function r(r,a,n){return{priority:5,restrict:"A",scope:{echarts:"=",echartsDimension:"=",config:"="},bindToController:!0,controller:["$scope","$element",function(i,o){var s=this,c=r.getEchartsGlobalOption(),l=s.echarts,u=s.config,h=c.theme,f=c.driftPalette,g=o[0];if(!l)throw new Error("Echarts Instance Identity Required");n.adaptEchartsDimension(g,s.echartsDimension);var d=h?t.init(g,h):t.init(g);d.setOption(c),r.driftEchartsPalette(d,f),r.registerEchartsInstance(l,d),a.adaptWaterfallTooltip(d,u.waterfall),a.adaptWaterfallSeries(u,u.waterfall),e.isObject(u)&&e.isArray(u.series)?d.setOption(u):d.showLoading(),i.$watch("chart.echartsDimension",function(t,r){e.equals(t,r)||(n.adaptEchartsDimension(g,t),n.synchronizeEchartsDimension(d))}),i.$watchCollection("chart.config.title",function(){a.adaptWaterfallSeries(s.config,s.config.waterfall),r.updateEchartsInstance(l,s.config)}),i.$watchCollection("chart.config.series",function(){a.adaptWaterfallSeries(s.config,s.config.waterfall),r.updateEchartsInstance(l,s.config)}),i.$on("$destroy",function(){d.clear(),d.dispose(),r.removeEchartsInstance(l),n.removeEchartsDimension(g)})}],controllerAs:"chart"}}e.module("echarts-ng").directive("echarts",r),r.$inject=["$echarts","$waterfall","$dimension"]}(angular,echarts);