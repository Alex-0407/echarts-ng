!function(t){"use strict";t.module("echarts-ng",[])}(angular),function(t){"use strict";function e(){var e=this;e.$get=[function(){function e(t,e){if(e){var r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a1}: <br/> {b1}: {c1}"}};t.setOption(r)}}function r(t){return t.reduce(function(t,e){return t+e},0)}function a(t){var e;return e=t.reduce(function(t,e,a,n){if(a>0&&a<n.length-1){var o=a,i=n.slice(0,o),s=r(i);t.push(s)}return t},[]),e.unshift(0)&&e.push(0),e}function n(e,r){if(r&&t.isArray(e.series)&&1===e.series.length){var a=e.series[0];if(t.isArray(a.data)){var n={stack:"waterfall",label:{normal:{show:!0,position:"inside"}}};t.extend(a,n);var i={name:"helper",type:"bar",stack:"waterfall",itemStyle:{normal:{barBorderColor:"rgba(0,0,0,1)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}},data:o.calculateWaterfallFlow(a.data)};e.series=[i,a]}}}var o={};return o.adaptWaterfallTooltip=e,o.calculateWaterfallFlow=a,o.wrapWaterfallSeries=n,o}]}t.module("echarts-ng").provider("$waterfall",e)}(angular),function(t){"use strict";function e(){this.storage={}}function r(){var r=this;r.GLOBAL_OPTION={theme:"macarons",title:{left:"center",top:"top",padding:[20,10,10,10]},grid:{top:"15%",left:"5%",right:"5%",bottom:"5%",containLabel:!0},backgroundColor:"rgba(255, 255, 255, .5)",legend:{left:"center",top:"top",padding:[20,10,10,10]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}}},r.setGlobalOption=function(e){t.extend(r.GLOBAL_OPTION,e)},r.$get=["$q","$timeout","$waterfall",function(a,n,o){function i(){return r.GLOBAL_OPTION}function s(){return Math.random().toString(36).substr(2,9)}function c(t,e){p.storage.set(t,e)}function l(t){var e=a.defer();return n(function(){p.storage.has(t)?e.resolve(p.storage.get(t)):(console.error("Echarts Identity Not Registered, Please Verify The Process"),e.reject({errorDesc:"Echarts Identity Not Registered, Please Verify The Process"}))},0),e.promise}function u(t){p.storage.has(t)&&p.storage["delete"](t)}function f(e,r){var a=p.storage.get(e);return t.isUndefined(a)?void console.warn("The instance not registered. Probably the exception belongs to the directive wrap"):(o.wrapWaterfallSeries(r,r.waterfall),void(t.isObject(r)&&t.isArray(r.series)&&r.series.length?(a.hideLoading(),a.setOption(r)):(a.clear(),a.showLoading())))}function g(e){var r=e.getOption(),a=t.copy(r.color),n=h(a,p.storage.size);e.setOption({color:n})}function h(t,e){var r,a,n=t.length;return r=n>e?e:e%n,a=t.splice(0,r),t.concat(a)}var p={};return p.storage=t.isDefined(Map)?new Map:new e,p.generateInstanceIdentity=s,p.getEchartsGlobalOption=i,p.registerEchartsInstance=c,p.queryEchartsInstance=l,p.removeEchartsInstance=u,p.updateEchartsInstance=f,p.driftPaletteProperty=h,p.driftEchartsPalette=g,p}]}t.module("echarts-ng").provider("$echarts",r),e.prototype.has=function(t){return this.storage.hasOwnProperty(t)},e.prototype.get=function(t){return this.storage[t]},e.prototype.set=function(t,e){this.storage[t]=e},e.prototype["delete"]=function(t){delete this.storage[t]},Object.defineProperty(e.prototype,"size",{enumerable:!0,configurable:!1,get:function(){return Object.keys(this.storage).length}})}(angular),function(t,e){"use strict";function r(r,a){return{priority:5,restrict:"A",scope:{echarts:"=",config:"="},bindToController:!0,controller:["$scope","$element",function(n,o){var i=this,s=r.getEchartsGlobalOption(),c=i.echarts,l=i.config,u=s.theme,f=o[0];if(!c)throw new Error("Echarts Instance Identity Required");var g=u?e.init(f,u):e.init(f);g.setOption(s),r.driftEchartsPalette(g),r.registerEchartsInstance(c,g),a.adaptWaterfallTooltip(g,l.waterfall),a.wrapWaterfallSeries(l,l.waterfall),t.isObject(l)&&t.isArray(l.series)?g.setOption(l):g.showLoading(),n.$watchCollection("vm.config.title",function(){a.wrapWaterfallSeries(l,l.waterfall),r.updateEchartsInstance(c,l)}),n.$watchCollection("vm.config.series",function(){a.wrapWaterfallSeries(l,l.waterfall),r.updateEchartsInstance(c,l)}),n.$on("$destroy",function(){g.clear(),g.dispose(),r.removeEchartsInstance(c)})}],controllerAs:"chart"}}t.module("echarts-ng").directive("echarts",r),r.$inject=["$echarts","$waterfall"]}(angular,echarts);