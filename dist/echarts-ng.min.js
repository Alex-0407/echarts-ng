!function(e){"use strict";e.module("echarts-ng",[])}(angular),function(e){"use strict";function t(){var t=this;t.$get=[function(){function t(e,t){if(t){var r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{a1}: <br/> {b1}: {c1}"}};e.setOption(r)}}function r(e){return e.reduce(function(e,t){return e+t},0)}function n(e){var t;return t=e.reduce(function(e,t,n,a){if(n>0&&n<a.length-1){var i=n,o=a.slice(0,i),s=r(o);e.push(s)}return e},[]),t.unshift(0)&&t.push(0),t}function a(t,r){if(r&&e.isArray(t.series)&&1===t.series.length){var n=t.series[0];if(e.isArray(n.data)){var a={stack:"waterfall",label:{normal:{show:!0,position:"inside"}}};e.extend(n,a);var o={name:"helper",type:"bar",stack:"waterfall",itemStyle:{normal:{barBorderColor:"rgba(0,0,0,1)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}},data:i.calculateWaterfallFlow(n.data)};t.series=[o,n]}}}var i={};return i.adaptWaterfallTooltip=t,i.calculateWaterfallFlow=n,i.wrapWaterfallSeries=a,i}]}e.module("echarts-ng").provider("$waterfall",t)}(angular),function(e){"use strict";function t(){var t=this;t.initialCalculateHeight="",t.calculateDynamicDimension=function(e){var t=45,r=e.length,n=e[0].data.length*r;switch(!0){case 5>n:t=60;break;case n>=5&&10>n:t=45;break;case n>=10:t=35}return t*n+"px"},t.$get=[function(){function r(r,n){if(!e.isString(n))return void console.warn("The Pass Pixel Ratio Not Assign, Please Make Sure Height Already Specified");var a,i,o=n.split(":").reverse().map(Number);return 2!==o.length?void console.warn("The Pass Pixel Ratio Invalid, Please Verify Param"):(a=r.clientWidth,i=a*o[0]/o[1],t.initialCalculateHeight=i+"px",void(r.style.height=i+"px"))}function n(e){e.style.removeProperty?e.style.removeProperty("height"):e.style.removeAttribute("height")}function a(e){e.resize()}function i(r,n,a){e.isArray(n)&&e.isObject(n[0])&&e.isArray(n[0].data)&&(r.style.height=a?t.calculateDynamicDimension(n):t.initialCalculateHeight)}var o={};return o.adaptEchartsDimension=r,o.removeEchartsDimension=n,o.synchronizeEchartsDimension=a,o.adjustEchartsDimension=i,o}]}e.module("echarts-ng").provider("$dimension",t)}(angular),function(e){"use strict";function t(){this.storage={}}function r(){var r=this;r.GLOBAL_OPTION={theme:"macarons",title:{left:"center",top:"top",padding:[20,10,10,10]},grid:{top:"15%",left:"5%",right:"5%",bottom:"5%",containLabel:!0},backgroundColor:"rgba(255, 255, 255, .5)",legend:{left:"center",top:"top",padding:[20,10,10,10]},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}}},r.setGlobalOption=function(t){e.extend(r.GLOBAL_OPTION,t)},r.$get=["$q","$timeout","$waterfall","$dimension",function(n,a,i,o){function s(){return r.GLOBAL_OPTION}function c(){return Math.random().toString(36).substr(2,9)}function l(e,t){p.storage.set(e,t)}function h(e){var t=n.defer();return a(function(){p.storage.has(e)?t.resolve(p.storage.get(e)):(console.error("Echarts Identity Not Registered, Please Verify The Process"),t.reject({errorDesc:"Echarts Identity Not Registered, Please Verify The Process"}))},0),t.promise}function u(e){p.storage.has(e)&&p.storage["delete"](e)}function f(t,r){var n=p.storage.get(t);return e.isUndefined(n)?void console.warn("The instance not registered. Probably the exception belongs to the directive wrap"):(i.wrapWaterfallSeries(r,r.waterfall),o.adjustEchartsDimension(n.getDom(),r.series,r.dynamic),void(e.isObject(r)&&e.isArray(r.series)&&r.series.length?(n.hideLoading(),n.resize(),n.setOption(r)):(n.clear(),n.showLoading())))}function g(t){var r=t.getOption(),n=e.copy(r.color),a=d(n,p.storage.size);t.setOption({color:a})}function d(e,t){var r,n,a=e.length;return r=a>t?t:t%a,n=e.splice(0,r),e.concat(n)}var p={};return p.storage=e.isDefined(Map)?new Map:new t,p.generateInstanceIdentity=c,p.getEchartsGlobalOption=s,p.registerEchartsInstance=l,p.queryEchartsInstance=h,p.removeEchartsInstance=u,p.updateEchartsInstance=f,p.driftPaletteProperty=d,p.driftEchartsPalette=g,p}]}e.module("echarts-ng").provider("$echarts",r),t.prototype.has=function(e){return this.storage.hasOwnProperty(e)},t.prototype.get=function(e){return this.storage[e]},t.prototype.set=function(e,t){this.storage[e]=t},t.prototype["delete"]=function(e){delete this.storage[e]},Object.defineProperty(t.prototype,"size",{enumerable:!0,configurable:!1,get:function(){return Object.keys(this.storage).length}})}(angular),function(e,t){"use strict";function r(r,n,a){return{priority:5,restrict:"A",scope:{echarts:"=",echartsDimension:"=",config:"="},bindToController:!0,controller:["$scope","$element",function(i,o){var s=this,c=r.getEchartsGlobalOption(),l=s.echarts,h=s.config,u=c.theme,f=o[0];if(!l)throw new Error("Echarts Instance Identity Required");a.adaptEchartsDimension(f,s.echartsDimension);var g=u?t.init(f,u):t.init(f);g.setOption(c),r.driftEchartsPalette(g),r.registerEchartsInstance(l,g),n.adaptWaterfallTooltip(g,h.waterfall),n.wrapWaterfallSeries(h,h.waterfall),e.isObject(h)&&e.isArray(h.series)?g.setOption(h):g.showLoading(),i.$watch("chart.echartsDimension",function(t,r){e.equals(t,r)||(a.adaptEchartsDimension(f,t),a.synchronizeEchartsDimension(g))}),i.$watchCollection("chart.config.title",function(){n.wrapWaterfallSeries(s.config,s.config.waterfall),r.updateEchartsInstance(l,s.config)}),i.$watchCollection("chart.config.series",function(){n.wrapWaterfallSeries(s.config,s.config.waterfall),r.updateEchartsInstance(l,s.config)}),i.$on("$destroy",function(){g.clear(),g.dispose(),r.removeEchartsInstance(l),a.removeEchartsDimension(f)})}],controllerAs:"chart"}}e.module("echarts-ng").directive("echarts",r),r.$inject=["$echarts","$waterfall","$dimension"]}(angular,echarts);